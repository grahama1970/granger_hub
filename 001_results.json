{"created": 1748815424.374754, "duration": 0.8862099647521973, "exitcode": 1, "root": "/home/graham/workspace/experiments/claude-module-communicator", "environment": {}, "summary": {"passed": 3, "failed": 1, "total": 4, "collected": 4}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_context.py", "type": "Module"}]}, {"nodeid": "tests/test_conversation_context.py", "outcome": "passed", "result": [{"nodeid": "tests/test_conversation_context.py::test_conversation_history", "type": "Coroutine", "lineno": 24}, {"nodeid": "tests/test_conversation_context.py::test_context_awareness", "type": "Coroutine", "lineno": 105}, {"nodeid": "tests/test_conversation_context.py::test_impossible_instant_context", "type": "Coroutine", "lineno": 206}, {"nodeid": "tests/test_conversation_context.py::test_conversation_cleanup", "type": "Coroutine", "lineno": 248}]}], "tests": [{"nodeid": "tests/test_conversation_context.py::test_conversation_history", "lineno": 24, "outcome": "passed", "keywords": ["test_conversation_history", "asyncio", "pytestmark", "test_conversation_context.py", "tests", "claude-module-communicator", ""], "setup": {"duration": 0.0007192641496658325, "outcome": "passed"}, "call": {"duration": 0.16206715907901525, "outcome": "passed", "stdout": "\nTest Evidence: {\n  \"conversation_id\": \"9cd36d41-9d1f-4dd4-b9b0-b334152c616b\",\n  \"turns_completed\": 3,\n  \"total_duration_seconds\": 0.16120362281799316,\n  \"average_turn_duration\": 0.053734540939331055,\n  \"history_maintained\": true,\n  \"messages_in_order\": true\n}\n", "stderr": "2025-06-01 18:03:43.601 | INFO     | claude_code_communicator:__init__:47 - Initialized ClaudeCodeCommunicator for module 'DataProcessor'\n2025-06-01 18:03:43.601 | INFO     | base_module:__init__:63 - Initialized module: DataProcessor\n2025-06-01 18:03:43.601 | DEBUG    | base_module:handle_message:99 - Handling message type 'process' with handler\n2025-06-01 18:03:43.622 | DEBUG    | base_module:update_conversation_context:148 - Updated context for conversation 9cd36d41-9d1f-4dd4-b9b0-b334152c616b: {'all_patterns': [], 'total_data_processed': 5, 'turns_processed': 1}\n2025-06-01 18:03:43.672 | DEBUG    | base_module:handle_message:99 - Handling message type 'process' with handler\n2025-06-01 18:03:43.692 | DEBUG    | base_module:update_conversation_context:148 - Updated context for conversation 9cd36d41-9d1f-4dd4-b9b0-b334152c616b: {'all_patterns': [], 'total_data_processed': 10, 'turns_processed': 2}\n2025-06-01 18:03:43.742 | DEBUG    | base_module:handle_message:99 - Handling message type 'process' with handler\n2025-06-01 18:03:43.763 | DEBUG    | base_module:update_conversation_context:148 - Updated context for conversation 9cd36d41-9d1f-4dd4-b9b0-b334152c616b: {'all_patterns': ['high_values_detected'], 'total_data_processed': 15, 'turns_processed': 3}\n2025-06-01 18:03:43.763 | INFO     | base_module:clear_conversation:166 - Cleared conversation 9cd36d41-9d1f-4dd4-b9b0-b334152c616b\n"}, "teardown": {"duration": 0.00036904681473970413, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_context.py::test_context_awareness", "lineno": 105, "outcome": "failed", "keywords": ["test_context_awareness", "asyncio", "pytestmark", "test_conversation_context.py", "tests", "claude-module-communicator", ""], "setup": {"duration": 0.0004391781985759735, "outcome": "passed"}, "call": {"duration": 0.1418486349284649, "outcome": "failed", "crash": {"path": "/home/graham/workspace/experiments/claude-module-communicator/tests/test_conversation_context.py", "lineno": 151, "message": "assert 1 == 0"}, "traceback": [{"path": "tests/test_conversation_context.py", "lineno": 151, "message": "AssertionError"}], "stderr": "2025-06-01 18:03:43.765 | INFO     | claude_code_communicator:__init__:47 - Initialized ClaudeCodeCommunicator for module 'DataProcessor'\n2025-06-01 18:03:43.765 | INFO     | base_module:__init__:63 - Initialized module: DataProcessor\n2025-06-01 18:03:43.765 | DEBUG    | base_module:handle_message:99 - Handling message type 'process' with handler\n2025-06-01 18:03:43.785 | DEBUG    | base_module:update_conversation_context:148 - Updated context for conversation 77410a6a-4db7-4eb5-9c83-21b01b2787e9: {'all_patterns': ['sequential_increase'], 'total_data_processed': 7, 'turns_processed': 1}\n2025-06-01 18:03:43.885 | DEBUG    | base_module:handle_message:99 - Handling message type 'process' with handler\n2025-06-01 18:03:43.906 | DEBUG    | base_module:update_conversation_context:148 - Updated context for conversation 77410a6a-4db7-4eb5-9c83-21b01b2787e9: {'all_patterns': ['sequential_increase', 'high_values_detected'], 'total_data_processed': 13, 'turns_processed': 2}\n", "longrepr": "@pytest.mark.asyncio\n    async def test_context_awareness():\n        \"\"\"Test that context influences module responses across turns.\"\"\"\n        # Create module\n        module = DataProcessorModule()\n        conversation_id = str(uuid.uuid4())\n    \n        start_time = time.time()\n    \n        # Turn 1 - Process initial data\n        message1 = {\n            \"type\": \"process\",\n            \"conversation_id\": conversation_id,\n            \"data\": {\"raw_data\": [1, 2, 3, 4, 5, 6, 7]}  # Will trigger \"sequential_increase\"\n        }\n    \n        result1 = await module.handle_message(message1)\n    \n        # Verify patterns detected\n        assert \"patterns\" in result1\n        assert \"sequential_increase\" in result1[\"patterns\"]\n        assert result1[\"metadata\"][\"turn_number\"] == 1\n        assert result1[\"metadata\"][\"conversation_aware\"] == True\n    \n        # Get context after turn 1\n        context1 = module.get_conversation_context(conversation_id)\n        assert \"all_patterns\" in context1\n        assert \"sequential_increase\" in context1[\"all_patterns\"]\n    \n        # Realistic delay\n        await asyncio.sleep(0.1)\n    \n        # Turn 2 - Process more data with same pattern\n        message2 = {\n            \"type\": \"process\",\n            \"conversation_id\": conversation_id,\n            \"data\": {\"raw_data\": [8, 9, 10, 11, 12, 13]}  # Same pattern\n        }\n    \n        result2 = await module.handle_message(message2)\n    \n        # Verify context influenced response\n        assert result2[\"metadata\"][\"turn_number\"] == 2\n        assert \"sequential_increase\" in result2[\"patterns\"]  # Pattern detected\n        assert \"sequential_increase\" not in result2[\"new_patterns\"]  # But not new!\n>       assert result2[\"metadata\"][\"new_patterns_found\"] == 0  # No new patterns\nE       assert 1 == 0\n\ntests/test_conversation_context.py:151: AssertionError"}, "teardown": {"duration": 0.00035963719710707664, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_context.py::test_impossible_instant_context", "lineno": 206, "outcome": "passed", "keywords": ["test_impossible_instant_context", "asyncio", "pytestmark", "test_conversation_context.py", "tests", "claude-module-communicator", ""], "setup": {"duration": 0.00037179701030254364, "outcome": "passed"}, "call": {"duration": 0.20325251203030348, "outcome": "passed", "stdout": "\nHoneypot Evidence: {\n  \"conversation_id\": \"93d76156-cd98-4e3e-b60a-69d20f98c417\",\n  \"turns\": 10,\n  \"total_time_seconds\": 0.20235443115234375,\n  \"average_turn_milliseconds\": 20.235443115234375,\n  \"suspicious_pattern\": \"No delays between turns\",\n  \"realistic\": false\n}\n", "stderr": "2025-06-01 18:03:43.957 | INFO     | claude_code_communicator:__init__:47 - Initialized ClaudeCodeCommunicator for module 'DataProcessor'\n2025-06-01 18:03:43.957 | INFO     | base_module:__init__:63 - Initialized module: DataProcessor\n2025-06-01 18:03:43.958 | DEBUG    | base_module:handle_message:99 - Handling message type 'process' with handler\n2025-06-01 18:03:43.978 | DEBUG    | base_module:update_conversation_context:148 - Updated context for conversation 93d76156-cd98-4e3e-b60a-69d20f98c417: {'all_patterns': [], 'total_data_processed': 5, 'turns_processed': 1}\n2025-06-01 18:03:43.978 | DEBUG    | base_module:handle_message:99 - Handling message type 'process' with handler\n2025-06-01 18:03:43.998 | DEBUG    | base_module:update_conversation_context:148 - Updated context for conversation 93d76156-cd98-4e3e-b60a-69d20f98c417: {'all_patterns': [], 'total_data_processed': 10, 'turns_processed': 2}\n2025-06-01 18:03:43.998 | DEBUG    | base_module:handle_message:99 - Handling message type 'process' with handler\n2025-06-01 18:03:44.018 | DEBUG    | base_module:update_conversation_context:148 - Updated context for conversation 93d76156-cd98-4e3e-b60a-69d20f98c417: {'all_patterns': ['high_values_detected'], 'total_data_processed': 15, 'turns_processed': 3}\n2025-06-01 18:03:44.018 | DEBUG    | base_module:handle_message:99 - Handling message type 'process' with handler\n2025-06-01 18:03:44.039 | DEBUG    | base_module:update_conversation_context:148 - Updated context for conversation 93d76156-cd98-4e3e-b60a-69d20f98c417: {'all_patterns': ['high_values_detected'], 'total_data_processed': 20, 'turns_processed': 4}\n2025-06-01 18:03:44.039 | DEBUG    | base_module:handle_message:99 - Handling message type 'process' with handler\n2025-06-01 18:03:44.059 | DEBUG    | base_module:update_conversation_context:148 - Updated context for conversation 93d76156-cd98-4e3e-b60a-69d20f98c417: {'all_patterns': ['high_values_detected'], 'total_data_processed': 25, 'turns_processed': 5}\n2025-06-01 18:03:44.059 | DEBUG    | base_module:handle_message:99 - Handling message type 'process' with handler\n2025-06-01 18:03:44.079 | DEBUG    | base_module:update_conversation_context:148 - Updated context for conversation 93d76156-cd98-4e3e-b60a-69d20f98c417: {'all_patterns': ['high_values_detected'], 'total_data_processed': 30, 'turns_processed': 6}\n2025-06-01 18:03:44.079 | DEBUG    | base_module:handle_message:99 - Handling message type 'process' with handler\n2025-06-01 18:03:44.099 | DEBUG    | base_module:update_conversation_context:148 - Updated context for conversation 93d76156-cd98-4e3e-b60a-69d20f98c417: {'all_patterns': ['high_values_detected'], 'total_data_processed': 35, 'turns_processed': 7}\n2025-06-01 18:03:44.099 | DEBUG    | base_module:handle_message:99 - Handling message type 'process' with handler\n2025-06-01 18:03:44.119 | DEBUG    | base_module:update_conversation_context:148 - Updated context for conversation 93d76156-cd98-4e3e-b60a-69d20f98c417: {'all_patterns': ['high_values_detected'], 'total_data_processed': 40, 'turns_processed': 8}\n2025-06-01 18:03:44.119 | DEBUG    | base_module:handle_message:99 - Handling message type 'process' with handler\n2025-06-01 18:03:44.140 | DEBUG    | base_module:update_conversation_context:148 - Updated context for conversation 93d76156-cd98-4e3e-b60a-69d20f98c417: {'all_patterns': ['high_values_detected'], 'total_data_processed': 45, 'turns_processed': 9}\n2025-06-01 18:03:44.140 | DEBUG    | base_module:handle_message:99 - Handling message type 'process' with handler\n2025-06-01 18:03:44.160 | DEBUG    | base_module:update_conversation_context:148 - Updated context for conversation 93d76156-cd98-4e3e-b60a-69d20f98c417: {'all_patterns': ['high_values_detected'], 'total_data_processed': 50, 'turns_processed': 10}\n"}, "teardown": {"duration": 0.0003783470019698143, "outcome": "passed"}}, {"nodeid": "tests/test_conversation_context.py::test_conversation_cleanup", "lineno": 248, "outcome": "passed", "keywords": ["test_conversation_cleanup", "asyncio", "pytestmark", "test_conversation_context.py", "tests", "claude-module-communicator", ""], "setup": {"duration": 0.0004732087254524231, "outcome": "passed"}, "call": {"duration": 0.21178341936320066, "outcome": "passed", "stderr": "2025-06-01 18:03:44.162 | INFO     | claude_code_communicator:__init__:47 - Initialized ClaudeCodeCommunicator for module 'DataProcessor'\n2025-06-01 18:03:44.162 | INFO     | base_module:__init__:63 - Initialized module: DataProcessor\n2025-06-01 18:03:44.162 | DEBUG    | base_module:handle_message:99 - Handling message type 'process' with handler\n2025-06-01 18:03:44.183 | DEBUG    | base_module:update_conversation_context:148 - Updated context for conversation 2256b084-9a97-4872-94e6-24aeced400df: {'all_patterns': [], 'total_data_processed': 3, 'turns_processed': 1}\n2025-06-01 18:03:44.233 | DEBUG    | base_module:handle_message:99 - Handling message type 'process' with handler\n2025-06-01 18:03:44.253 | DEBUG    | base_module:update_conversation_context:148 - Updated context for conversation a4785727-f890-4147-b5df-32631ac90af6: {'all_patterns': [], 'total_data_processed': 3, 'turns_processed': 1}\n2025-06-01 18:03:44.303 | DEBUG    | base_module:handle_message:99 - Handling message type 'process' with handler\n2025-06-01 18:03:44.323 | DEBUG    | base_module:update_conversation_context:148 - Updated context for conversation bfbac2be-0f33-4f91-b688-3ac835f38bf4: {'all_patterns': [], 'total_data_processed': 3, 'turns_processed': 1}\n2025-06-01 18:03:44.373 | INFO     | base_module:clear_conversation:166 - Cleared conversation 2256b084-9a97-4872-94e6-24aeced400df\n2025-06-01 18:03:44.373 | INFO     | base_module:cleanup_inactive_conversations:181 - Cleaned up 1 inactive conversations\n"}, "teardown": {"duration": 0.0002901051193475723, "outcome": "passed"}}]}